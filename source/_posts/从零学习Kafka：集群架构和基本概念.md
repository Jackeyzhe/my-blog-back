---
title: 从零学习Kafka：集群架构和基本概念
date: 2026-01-16 16:48:07
tags: Kafka
---

在前文中，我们从源码层面介绍了 Flink 的 Kafka Connector 的实现。从本文开始，我们的目标也正式从 Flink 过渡到 Kafka。<!-- more -->

### 什么是 Kafka

Kafka 官方文档给出的定义是：Apache Kafka 是一个事件流平台。它的关键能力如下：

1. 发布（写入）和订阅（读取）事件流，包括从其他系统持续导入和导出数据。

2. 将事件流持久可靠的存储，可以自定义时长。

3. 实时处理事件流或历史回溯。

我们通过一个最基础的场景来理解一下这些定义：系统 A 将数据发送给 Kafka，Kafka 会将数据进行持久化存储，系统 B 从 Kafka 中读取系统 A 发送的数据。那么这里有两个关键问题：一是如何设计事件的编码格式，二是使用什么样的传输协议。

关于编码格式，目前有很多成熟的方案，比如 Protocol Buffer、Thrift、JSON 等。而 Kafka 使用的是纯二进制的字节序列。

确定好了编码格式之后，我们再来看传输协议。常见的传输协议有两种：

1. 点对点模型：点对点模型也叫消息队列模型，即上游发送的数据只能由一个下游接收。对上面的场景来说，就是系统 A 发送的消息，只能由系统 B 接收。

2. 发布/订阅模型：在这个模型中有 topic 的概念，会存在多个发布者向同一个 topic 发送消息，多个订阅者从 topic 读取消息的情况。

Kafka 同时支持这两种模型，这点我们在后面会具体阐述。

现在知道了什么是 Kafka 之后，我们再来考虑另一个问题：为什么要使用 Kafka？

这个问题每个人可能会有不同的答案，对我而言，使用 Kafka 最主要的原因是做流量缓冲和数据同步。
